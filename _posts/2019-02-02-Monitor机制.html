---
layout: post
---

<!DOCTYPE html>
<html>

<head>
    <title>Monitor机制 - 幕布</title>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="renderer" content="webkit" />
    <meta name="author" content="mubu.com" />
</head>

<body
    style="margin: 50px 20px;color: #333;font-family: SourceSansPro,-apple-system,BlinkMacSystemFont,'PingFang SC',Helvetica,Arial,'Microsoft YaHei',微软雅黑,黑体,Heiti,sans-serif,SimSun,宋体,serif">
    <div class="export-wrapper">
        <div style="font-size: 22px; padding: 0 15px 0;"></div>
        <ul style="list-style: disc outside;">
            <li style="line-height: 24px;"><span class="content mubu-node"
                    style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">Monitor机制</span>
                <ul class="children" style="list-style: disc outside; padding-bottom: 4px;">
                    <li style="line-height: 24px;"><span class="content mubu-node"
                            style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">每一个对象都有一个monitor，即监视器。</span>
                    </li>
                    <li style="line-height: 24px;"><span class="content mubu-node"
                            images="%5B%7B%22id%22%3A%22a316d6cdff2cc17-519559%22%2C%22oh%22%3A362%2C%22ow%22%3A535%2C%22uri%22%3A%22document_image%2Fd70ecd52-b992-4761-ab7b-017c154f3cee-519559.jpg%22%7D%5D"
                            style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;">Monitor的机制如下图：</span>
                        <div style="padding: 3px 0"><img
                                src="https://img.mubu.com/document_image/d70ecd52-b992-4761-ab7b-017c154f3cee-519559.jpg"
                                style="max-width: 720px;" class="attach-img"></div>
                    </li>
                    <li style="line-height: 24px;"><span class="content mubu-node"
                            style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"><span
                                class="bold" style="font-weight: bold;">The Owner</span>：同一时刻，只能有一个对象持有monitor。</span>
                    </li>
                    <li style="line-height: 24px;"><span class="content mubu-node"
                            style="line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"><span
                                class="bold" style="font-weight: bold;">Entry
                                Set</span>：当一个线程要获取monitor时，会首先进入entry-set排队，如果monitor没有被其它线程持有，这个线程会和wait-set中被唤醒的其它线程竞争monitor。</span>
                    </li>
                    <li style="line-height: 24px;"><span class="content mubu-node" color="#dc2d1e"
                            style="color: rgb(220, 45, 30); line-height: 24px; min-height: 24px; font-size: 16px; padding: 2px 0px; display: inline-block; vertical-align: top;"><span
                                class="bold" style="font-weight: bold;">Wait
                                Set</span>：当一个线程持有monitor时，该monitor关联的对象调用了wait()方法，那么这个线程会释放monitor，并且进入wait-set中等待。然后，当该monitor关联的对象调用了notify()或notifyAll()方法后，wait-set中的线程被唤醒，被唤醒的线程将与entry-set中的线程竞争monitor。<span
                                class="bold" style="font-weight: bold;">（notify()方法会随机唤醒一个线程。）</span></span></li>
                </ul>
            </li>
        </ul>
    </div>

</body>

</html>