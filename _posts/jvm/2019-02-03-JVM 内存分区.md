---
layout: post
---

## 方法区
《Java 虚拟机规范》只是规定了有方法区这么个概念和它的作用，并没有规定如何去实现它。
在Java 8以前，方法区位于永久代，即Java堆中；从Java 8开始，方法区位于Metaspace（元空间，本地堆内存），元空间仍然可以触发GC。
- 类型信息
    - 类型的全名
    - 父类型的全名
    - 是一个类还是接口
    - 类型的修饰符
    - 父接口全名的列表
    - 类型的常量池
    - 类型字段的信息
    - 类型方法的信息
    - 所有的静态类变量（非常量）信息
    - 一个指向ClassLoader的引用
    - 一个指向Class类的引用
    - 方法列表
- 运行时常量池

## Java堆：保存对象和数组。
Java 堆是垃圾收集器管理的主要区域，因此也被称作GC 堆（Garbage Collected Heap）。

## Java栈：由栈帧组成。
- 栈帧
    - 局部变量数组（包含方法参数）
    - 动态链接
    - 操作数栈
    - 返回值

## 程序计数器
程序计数器是一块较小的内存空间，可以看作是**当前线程所执行的字节码的行号指示器**。字节码解释器工作时通过改变这个计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等功能都需要依赖这个计数器来完成。

另外，为了线程切换后能恢复到正确的执行位置，**每条线程都需要有一个独立的程序计数器**，各线程之间计数器互不影响，独立存储，我们称这类内存区域为“线程私有”的内存。

## 本地方法栈
和虚拟机栈所发挥的作用非常相似，区别是： 虚拟机栈为虚拟机执行 Java 方法 （也就是字节码）服务，而本地方法栈则为虚拟机使用到的 Native 方法服务。 